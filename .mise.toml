# Bruno API Collection Tasks for IBM Cloud VPC
#
# Prerequisites:
# - Set IBM_API_KEY environment variable with your IBM Cloud API key
# - Example: export IBM_API_KEY="your-api-key-here"
#
# Environment:
# - Default: --env prod (uses environments/prod.bru)
# - Alternative: --env dev (uses environments/dev.bru)

[tasks.auth]
description = "Get IBM Cloud IAM token"
run = "bru run auth/get-iam-token.bru --env prod"

[tasks."resource-groups:list"]
description = "List all resource groups"
run = "bru run auth/get-iam-token.bru resource-groups/list-resource-groups.bru --env prod"

[tasks."resource-groups:get-by-name"]
description = "Get resource group ID by name (set RESOURCE_GROUP_NAME)"
run = "bru run auth/get-iam-token.bru resource-groups/get-resource-group-by-name.bru --env prod"

[tasks."vpc:list"]
description = "List all VPCs"
run = "bru run auth/get-iam-token.bru vpc/list-vpcs.bru --env prod"

[tasks."vpc:list-paginated"]
description = "List VPCs with pagination (set PAGINATION_LIMIT, START_TOKEN)"
run = "bru run auth/get-iam-token.bru vpc/list-vpcs-paginated.bru --env prod"

[tasks."vpc:get"]
description = "Get specific VPC by ID (set VPC_ID env var)"
run = "bru run auth/get-iam-token.bru vpc/get-vpc.bru --env prod"

[tasks."vpc:create"]
description = "Create new VPC (set NEW_VPC_NAME, optionally RESOURCE_GROUP_ID)"
run = "bru run auth/get-iam-token.bru vpc/create-vpc.bru --env prod"

[tasks."subnets:create"]
description = "Create subnet with IP count (set NEW_SUBNET_NAME, VPC_ID, ZONE_NAME, SUBNET_IP_COUNT)"
run = "bru run auth/get-iam-token.bru vpc/subnets/create-subnet.bru --env prod"

[tasks."subnets:create-by-cidr"]
description = "Create subnet with CIDR block (set NEW_SUBNET_NAME, VPC_ID, ZONE_NAME, SUBNET_CIDR)"
run = "bru run auth/get-iam-token.bru vpc/subnets/create-subnet-by-cidr.bru --env prod"

[tasks."security-groups:create"]
description = "Create security group (set NEW_SG_NAME, VPC_ID)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/create-security-group.bru --env prod"

[tasks."security-groups:add-self"]
description = "Add self-reference inbound rule (set SECURITY_GROUP_ID)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/add-rule-self.bru --env prod"

[tasks."security-groups:add-outbound"]
description = "Add outbound all rule (set SECURITY_GROUP_ID)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/add-rule-outbound-all.bru --env prod"

[tasks."security-groups:add-ssh"]
description = "Add SSH inbound rule (set SECURITY_GROUP_ID, optionally SSH_SOURCE_CIDR)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/add-rule-ssh.bru --env prod"

[tasks."security-groups:add-http"]
description = "Add HTTP inbound rule (set SECURITY_GROUP_ID)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/add-rule-http.bru --env prod"

[tasks."security-groups:add-https"]
description = "Add HTTPS inbound rule (set SECURITY_GROUP_ID)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/add-rule-https.bru --env prod"

[tasks."security-groups:add-rule"]
description = "Add custom security group rule (set SECURITY_GROUP_ID, RULE_DIRECTION, RULE_PROTOCOL, REMOTE_CIDR)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/create-security-group-rule.bru --env prod"

[tasks."subnets:list"]
description = "List all subnets"
run = "bru run auth/get-iam-token.bru vpc/subnets/list-subnets.bru --env prod"

[tasks."security-groups:list"]
description = "List all security groups"
run = "bru run auth/get-iam-token.bru vpc/security-groups/list-security-groups.bru --env prod"

[tasks."instances:list"]
description = "List all instances (VSIs)"
run = "bru run auth/get-iam-token.bru vpc/instances/list-instances.bru --env prod"

[tasks."floating-ips:list"]
description = "List all floating IPs"
run = "bru run auth/get-iam-token.bru vpc/floating-ips/list-floating-ips.bru --env prod"

[tasks."load-balancers:list"]
description = "List all load balancers"
run = "bru run auth/get-iam-token.bru vpc/load-balancers/list-load-balancers.bru --env prod"

[tasks."security-groups:get"]
description = "Get specific security group by ID (set SECURITY_GROUP_ID env var)"
run = "bru run auth/get-iam-token.bru vpc/security-groups/get-security-group.bru --env prod"

[tasks."instances:get"]
description = "Get specific instance by ID (set INSTANCE_ID env var)"
run = "bru run auth/get-iam-token.bru vpc/instances/get-instance.bru --env prod"

[tasks."floating-ips:get"]
description = "Get specific floating IP by ID (set FLOATING_IP_ID env var)"
run = "bru run auth/get-iam-token.bru vpc/floating-ips/get-floating-ip.bru --env prod"

[tasks."load-balancers:get"]
description = "Get specific load balancer by ID (set LOAD_BALANCER_ID env var)"
run = "bru run auth/get-iam-token.bru vpc/load-balancers/get-load-balancer.bru --env prod"

[tasks."subnets:get"]
description = "Get specific subnet by ID (set SUBNET_ID env var)"
run = "bru run auth/get-iam-token.bru vpc/subnets/get-subnet.bru --env prod"

[tasks."instances:list-profiles"]
description = "List all instance profiles (compute configurations)"
run = "bru run auth/get-iam-token.bru vpc/instances/list-instance-profiles.bru --env prod"

[tasks."instances:list-images"]
description = "List all available OS images"
run = "bru run auth/get-iam-token.bru vpc/instances/list-images.bru --env prod"

[tasks."ssh-keys:list"]
description = "List all SSH keys"
run = "bru run auth/get-iam-token.bru vpc/ssh-keys/list-ssh-keys.bru --env prod"

[tasks."instances:create"]
description = "Create instance (set NEW_INSTANCE_NAME, VPC_ID, ZONE_NAME, PROFILE_NAME, IMAGE_ID, SUBNET_ID, SECURITY_GROUP_ID, SSH_KEY_ID)"
run = "bru run auth/get-iam-token.bru vpc/instances/create-instance.bru --env prod"

